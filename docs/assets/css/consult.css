/* ==========================================================
   RouterHaus — Consult page (enterprise-grade)
   Harmonized with Kits Design System (light/dark) — CLEANED
   ========================================================== */

/* ------------------- Design tokens (from kits.css) ------------------- */
:root{
  /* Light mode → EXACT dark-mode brand purples */
  --primary-h:234.433; --primary-s:100%; --primary-l:80.98%;
  --primary:hsl(var(--primary-h) var(--primary-s) var(--primary-l));
  --primary-rgb:158 167 255; /* #9ea7ff */

  --accent-h:300; --accent-s:100%; --accent-l:80.2%;
  --accent:hsl(var(--accent-h) var(--accent-s) var(--accent-l)); /* #ff9aff */

  --success:#10b981; --warning:#f59e0b; --danger:#ef4444; --info:#3b82f6;

  --font-sans:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;

  --text-xs:clamp(.75rem,.7rem + .25vw,.875rem);
  --text-sm:clamp(.875rem,.8rem + .375vw,1rem);
  --text-base:clamp(1rem,.9rem + .5vw,1.125rem);
  --text-lg:clamp(1.125rem,1rem + .625vw,1.25rem);
  --text-xl:clamp(1.25rem,1.1rem + .75vw,1.5rem);
  --text-2xl:clamp(1.5rem,1.3rem + 1vw,2rem);

  /* Light */
  --bg:#f8fafc; --bg-elev:#fff;
  --text-1:#0a0f1e; --text-2:#3a4361; --muted:#6d7694;

  --surface-primary:rgba(255,255,255,.9);
  --surface-secondary:rgba(255,255,255,.95);
  --surface-tertiary:rgba(255,255,255,.86);
  --surface-elevated:rgba(255,255,255,.98);

  --glass-bg:rgba(255,255,255,.1);
  --glass-border:rgba(0,0,0,.12);

  --border:rgba(0,0,0,.12);
  --border-strong:rgba(0,0,0,.2);
  --ring:color-mix(in oklab,var(--primary) 40%,transparent);

  --shadow-soft:0 2px 12px rgba(16,24,40,.08);
  --shadow:0 10px 32px rgba(16,24,40,.12);
  --shadow-sm:0 6px 20px rgba(16,24,40,.08);
  --shadow-strong:0 20px 48px rgba(16,24,40,.15);

  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem; --space-4:1rem;
  --space-5:1.25rem; --space-6:1.5rem; --space-8:2rem; --space-10:2.5rem; --space-12:3rem;

  --radius-xs:4px; --radius-sm:8px; --radius:12px; --radius-lg:18px; --radius-xl:24px; --radius-2xl:32px; --radius-full:9999px;

  --duration-fast:.15s; --duration-normal:.3s; --easing-smooth:cubic-bezier(.4,0,.2,1);

  color-scheme: light dark;
  accent-color: var(--primary);
}

/* Dark */
html[data-theme="dark"]{
  --bg:#0a0e16; --bg-elev:#0f1419;
  --text-1:#f0f4f8; --text-2:#cbd5e0; --muted:#a0aec0;

  --surface-primary:rgba(15,20,25,.85);
  --surface-secondary:rgba(20,25,35,.9);
  --surface-tertiary:rgba(25,30,40,.78);
  --surface-elevated:rgba(30,35,45,.95);

  --glass-bg:rgba(10,14,22,.4);
  --glass-border:rgba(255,255,255,.12);

  --border:rgba(255,255,255,.14);
  --border-strong:rgba(255,255,255,.22);
  --ring:color-mix(in oklab,var(--primary) 50%,transparent);

  --shadow:0 20px 40px rgba(0,0,0,.4);
  --shadow-sm:0 10px 24px rgba(0,0,0,.3);
  --shadow-strong:0 30px 60px rgba(0,0,0,.5);
}
@media (prefers-color-scheme: dark){
  :root:not([data-theme]){
    --bg:#0a0e16; --bg-elev:#0f1419;
    --text-1:#f0f4f8; --text-2:#cbd5e0; --muted:#a0aec0;
    --surface-primary:rgba(15,20,25,.85);
    --surface-secondary:rgba(20,25,35,.9);
    --surface-tertiary:rgba(25,30,40,.78);
    --surface-elevated:rgba(30,35,45,.95);
    --glass-bg:rgba(10,14,22,.4);
    --glass-border:rgba(255,255,255,.12);
    --border:rgba(255,255,255,.14);
    --border-strong:rgba(255,255,255,.22);
    --ring:color-mix(in oklab,var(--primary) 50%,transparent);
    --shadow:0 20px 40px rgba(0,0,0,.4);
    --shadow-sm:0 10px 24px rgba(0,0,0,.3);
    --shadow-strong:0 30px 60px rgba(0,0,0,.5);
  }
}

/* ------------------- Base ------------------- */
html,body{
  background:var(--bg); color:var(--text-1);
  font-family:var(--font-sans); font-size:var(--text-base); line-height:1.6;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.container{max-width:1200px;margin-inline:auto;padding:clamp(16px,3vw,28px);}
img{max-width:100%;height:auto;display:block;}
::selection{background:rgba(var(--primary-rgb),.3);color:var(--text-1);}
::-webkit-scrollbar{width:8px;height:8px}
::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--muted) 50%,transparent);border-radius:var(--radius-full)}
::-webkit-scrollbar-thumb:hover{background:color-mix(in oklab,var(--muted) 70%,transparent)}
.glass{background:var(--glass-bg);backdrop-filter:blur(20px) saturate(140%);border:1px solid var(--glass-border)}
@supports not (backdrop-filter:blur(20px)){.glass{background:var(--surface-primary)}}
.grad{ background: linear-gradient(90deg, var(--accent), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

/* ----- Buttons (unified header/footer) ----- */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:14px;
  padding:.72rem 1rem;
  font-weight:800;
  border:1px solid var(--border);
  background:color-mix(in oklab, var(--surface-primary, var(--surface, #fff)) 92%, transparent);
  color:var(--text-1);
  cursor:pointer;
  transition:transform var(--t, .22s cubic-bezier(.22,.61,.36,1)), box-shadow var(--t, .22s cubic-bezier(.22,.61,.36,1)), background var(--t, .22s cubic-bezier(.22,.61,.36,1)), border-color var(--t, .22s cubic-bezier(.22,.61,.36,1));
  box-shadow:var(--shadow-sm, 0 6px 20px rgba(16,24,40,.08));
}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:var(--shadow-md, var(--shadow, 0 18px 50px rgba(16,24,40,.12)));
}
.btn.primary{
  background:linear-gradient(135deg, var(--primary), color-mix(in oklab, var(--accent) 80%, var(--primary)));
  color:#fff;
  border-color:color-mix(in oklab, var(--primary) 60%, transparent);
}
.btn.ghost{
  background:transparent;
  color:var(--text-1);
}
.btn:disabled{
  opacity:.5;
  cursor:not-allowed;
  transform:none;
  box-shadow:none;
}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:var(--radius);border:1px solid var(--border);background:var(--surface-primary);color:var(--text-2);transition:all var(--duration-normal) var(--easing-smooth)}
.icon-btn:hover{background:var(--surface-secondary);color:var(--text-1);transform:translateY(-1px);box-shadow:var(--shadow-soft)}

/* ------------------- Hero ------------------- */
.consult-hero{
  background:
    radial-gradient(1100px 700px at 80% -20%,color-mix(in oklab,var(--accent) 8%,transparent),transparent 70%),
    linear-gradient(180deg,color-mix(in oklab,var(--surface-tertiary) 40%,transparent),transparent 50%),
    var(--bg);
  padding:clamp(24px,6vw,64px) 0;
}
.hero-inner{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(0,.8fr);gap:clamp(18px,3vw,38px);align-items:center}
.hero-copy h1{font-size:clamp(1.8rem,1.2rem + 2.2vw,3rem);margin:0 0 .5rem;line-height:1.1}
.hero-copy p{color:var(--text-2);font-size:clamp(1rem,.95rem + .3vw,1.15rem);margin:0 0 1rem}
.hero-ctas{display:flex;flex-wrap:wrap;gap:10px;margin:.5rem 0 1rem}
.hero-bullets{margin:.75rem 0 0;padding:0 0 0 1.2rem;color:var(--text-2)}
.hero-bullets li{margin:.25rem 0}
.hero-art{
  position:relative;border-radius:var(--radius-xl);border:1px solid var(--border);
  background:var(--surface-primary);min-height:320px;display:grid;place-items:center;box-shadow:var(--shadow-sm)
}
.hero-art .rings{position:absolute;inset:-10%;background:
  radial-gradient(240px 240px at 20% 25%,color-mix(in oklab,var(--primary) 20%,transparent),transparent 70%),
  radial-gradient(300px 300px at 80% 60%,color-mix(in oklab,var(--accent) 20%,transparent),transparent 70%);filter:blur(6px);opacity:.6}
.hero-art .stats{position:relative;display:grid;gap:10px}
.stat{display:grid;justify-items:center;padding:.8rem 1rem;border-radius:14px;background:var(--surface-tertiary);border:1px solid var(--border)}
.stat strong{font-size:1.4rem;font-weight:800}
.stat span{color:var(--muted);font-size:.9rem}
@media (max-width:980px){.hero-inner{grid-template-columns:1fr}.hero-art{order:-1;min-height:220px}}

/* ------------------- Trust bar ------------------- */
.trustbar{padding:10px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:color-mix(in oklab,var(--surface-secondary) 40%,transparent)}
.trust-inner{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.trust-inner .kicker{color:var(--muted);letter-spacing:.12em;text-transform:uppercase;font-weight:800;font-size:.8rem}
.trust-inner ul{display:flex;gap:14px 22px;flex-wrap:wrap;list-style:none;padding:0;margin:0}
.trust-inner li{display:inline-flex;align-items:center;gap:8px;color:var(--text-2)}

/* ------------------- Sections scaffold ------------------- */
.outcomes,.packages,.process,.cases,.intake,.faq,.footer-cta{padding:clamp(24px,6vw,60px) 0}
.section-head{text-align:center;margin-bottom:clamp(10px,2vw,16px)}
.section-head h2{font-size:clamp(1.4rem,1rem + 1.4vw,2rem);margin:0 0 .35rem}
.section-head p{color:var(--text-2);margin:0}

/* Cards & grids */
.grid{display:grid;gap:clamp(12px,1.6vw,18px)}
.cards-4{grid-template-columns:repeat(4,minmax(0,1fr))}
@media (max-width:1060px){.cards-4{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.cards-4{grid-template-columns:1fr}}
.card{
  border-radius:var(--radius-xl);border:1px solid var(--border);
  background:var(--surface-primary);padding:clamp(14px,2vw,18px);box-shadow:var(--shadow-sm);
  transition:transform var(--duration-normal) var(--easing-smooth),box-shadow var(--duration-normal) var(--easing-smooth),border-color var(--duration-normal) var(--easing-smooth)
}
.card:hover{transform:translateY(-6px) scale(1.01);box-shadow:var(--shadow-strong);border-color:var(--primary)}
.card h3{margin:0 0 .35rem;font-size:1.1rem}
.card p,.card .list{color:var(--text-2)}
.card .list{margin:.25rem 0 0;padding-left:1rem}
.card .list li{margin:.25rem 0}

/* ------------------- Process ------------------- */
.steps{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px}
.steps li{display:grid;gap:6px;justify-items:center;text-align:center;padding:12px;border-radius:var(--radius-lg);border:1px solid var(--border);background:var(--surface-secondary);transition:transform var(--duration-normal) var(--easing-smooth)}
.steps li:hover{transform:translateY(-2px)}
.steps li span{width:36px;height:36px;border-radius:999px;display:grid;place-items:center;font-weight:800;background:var(--primary);color:#fff}
.steps li em{color:var(--muted);font-style:normal;font-size:.9rem}
@media (max-width:900px){.steps{grid-template-columns:1fr}}

/* ------------------- Cases ------------------- */
.case-scroller{display:grid;grid-auto-flow:column;grid-auto-columns:min(340px,88vw);gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:8px}
.case-scroller .case{scroll-snap-align:start;padding:14px;border-radius:var(--radius);border:1px solid var(--border);background:var(--surface-secondary)}
.case header{display:flex;justify-content:space-between;align-items:baseline;gap:10px;margin-bottom:6px}
.case header span{color:var(--muted);font-size:.9rem}
.case-controls{display:flex;gap:8px;justify-content:center;margin-top:10px}

/* ------------------- Intake form — CLEANED (no progress, glow, required markers) ------------------- */
.intake form{
  position: relative;
  border:1px solid var(--border);
  border-radius:var(--radius-2xl);
  background:var(--surface-elevated);
  padding:clamp(16px,2.4vw,24px);
  box-shadow:var(--shadow);
}

/* Gradient glow behind the form (moderate) */
.intake form::before{
  content:"";
  position:absolute;
  inset:-14px -18px -18px;
  border-radius: calc(var(--radius-2xl) + 16px);
  background:
    radial-gradient(60% 45% at 25% 0%,  color-mix(in oklab,var(--primary) 30%, transparent), transparent 70%),
    radial-gradient(70% 55% at 85% 100%, color-mix(in oklab,var(--accent) 25%, transparent),  transparent 75%);
  filter: blur(28px);
  opacity:.7;
  z-index:-1;
  pointer-events:none;
}

/* Hide progress entirely */
.progress{ display:none !important; }

/* Fieldset block: clean card look + legend offset fix */
.step{
  /* knobs for legend positioning */
  --legend-top: .5rem;       /* distance from fieldset top to legend text */
  --legend-gap: 1rem;        /* extra space between legend and first row */

  border:1px solid var(--border);border-radius:var(--radius-xl);
  background:var(--surface-primary);
  position:relative;
  padding:var(--space-4);
  padding-top:calc(var(--space-4) + var(--legend-top) + var(--legend-gap));
  display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:10px;
  box-shadow:var(--shadow-sm);
}
.step + .step{margin-top:12px}

/* Legend: anchored visually inside the card */
.step > legend{
  position:absolute;
  top:var(--legend-top);
  left:var(--space-4);
  margin:0;
  padding:0 .25rem;                 /* covers top border neatly */
  background:var(--surface-primary);
  font-weight:800;font-size:var(--text-lg);line-height:1.2;color:var(--text-1);
  z-index:1;
}

/* Controls */
.step label{display:grid;gap:6px}
.step input,.step select,.step textarea{
  min-height:44px;
  padding:.7rem .9rem;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:var(--surface-secondary);
  color:var(--text-1);
  transition:border-color var(--duration-normal) var(--easing-smooth),box-shadow var(--duration-normal) var(--easing-smooth),background var(--duration-normal) var(--easing-smooth);
  outline:none;
}

/* Required markers and error emphasis */
.step label:has(> [required]) > span::after{
  content:" *"; color:var(--danger); font-weight:800;
}
.step [data-error="1"]{
  border-color:var(--danger);
  box-shadow:0 0 0 3px rgba(239,68,68,.15);
  background: color-mix(in oklab, var(--danger) 4%, var(--surface-secondary));
}
.step label:has([data-error="1"]) > span{ color:var(--danger); }

/* Remove skeuomorphic bevels; custom chevron */
.step select{
  -webkit-appearance:none; -moz-appearance:none; appearance:none;
  padding-right:2.75rem;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24'><path d='M6 9l6 6 6-6' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat:no-repeat;
  background-position:right .8rem center;
  background-size:18px;
  color:var(--text-1);
}
.step select::-ms-expand{display:none}

/* Number input spinner removal */
.step input[type=number]::-webkit-outer-spin-button,
.step input[type=number]::-webkit-inner-spin-button{ -webkit-appearance: none; margin:0 }
.step input[type=number]{ -moz-appearance:textfield }

/* Hover/Focus/Invalid states */
.step input:hover,.step select:hover,.step textarea:hover{ background:var(--surface-tertiary) }
.step input:focus,.step select:focus,.step textarea:focus{
  border-color:var(--ring);
  box-shadow:0 0 0 4px color-mix(in oklab,var(--ring) 28%,transparent)
}
.step ::placeholder{ color:color-mix(in oklab,var(--muted) 90%,transparent) }

.step textarea{min-height:120px;resize:vertical}
@media (max-width:800px){.step{grid-template-columns:1fr}}

/* Actions: hide Back/Next; keep submit visible and right-aligned */
#prevStep,#nextStep{ display:none !important; }
#submitIntake{ display:inline-flex; } /* JS also ensures it's not @hidden */
.step-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}

/* Form message */
.form-msg{min-height:1.2em;color:var(--danger);margin-top:6px;font-weight:600}

/* After intake */
.after-intake .thanks{padding:18px;border-radius:var(--radius-xl);border:1px solid var(--border);background:var(--surface-primary)}
.after-intake .stack{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}

/* ------------------- FAQ ------------------- */
.faq-grid{display:grid;gap:12px;grid-template-columns:repeat(2,minmax(0,1fr))}
.faq details{border:1px solid var(--border);border-radius:var(--radius-lg);background:var(--surface-secondary);padding:10px 12px}
.faq summary{cursor:pointer;font-weight:700}
.faq p{color:var(--text-2);margin:.5rem 0 0}
@media (max-width:900px){.faq-grid{grid-template-columns:1fr}}

/* ------------------- Footer CTA ------------------- */
.footer-cta{background:linear-gradient(180deg,color-mix(in oklab,var(--surface-tertiary) 45%,transparent),transparent),var(--bg);border-top:1px solid var(--border)}
.cta-inner{text-align:center}
.cta-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:8px}

/* ------------------- Reveal ------------------- */
.reveal{opacity:0;transform:translateY(8px);transition:opacity var(--duration-normal) var(--easing-smooth),transform var(--duration-normal) var(--easing-smooth)}
.reveal.in-view{opacity:1;transform:none}

/* ------------------- A11y & Motion ------------------- */
@media (prefers-reduced-motion: reduce){*{transition:none !important;animation:none !important}}
