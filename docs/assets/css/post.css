/* ==========================================================
   RouterHaus Journal â€” Revolutionary Blog Design (2025)
   Cleaned & harmonized with main.css tokens
   ========================================================== */

/* ---------- Local tokens (derived from main.css) ---------- */
:root {
  --rev-blue: var(--primary, #6f7dff);
  --rev-purple: var(--accent, #ff8df3);
  --rev-pink: #ec4899;
  --rev-green: #10b981;
  --rev-orange: #ff6b35;
  --rev-curve: cubic-bezier(.33,1,.68,1);
}

/* ---------- Reading Progress ---------- */
.reading-progress{
  position:fixed; top:0; left:0; height:4px; width:0;
  background:linear-gradient(90deg,var(--hero-start),var(--hero-end));
  z-index:1100;
  box-shadow:0 6px 16px rgba(0,0,0,.12);
  transform-origin:0 50%;
  transition:width .1s ease;
}

/* ---------- Layout ---------- */
.post-shell{
  width:min(1120px, calc(100% - 2rem));
  margin-inline:auto;
  padding: clamp(1.5rem, 3vw, 3rem) 0;
  display:grid;
  grid-template-columns: 300px 1fr;
  gap: clamp(1.25rem, 3vw, 2.5rem);
}
@media (max-width:1024px){
  .post-shell{ grid-template-columns: 1fr; }
}

/* ---------- Navigation Sidebar (ToC) ---------- */
.toc{
  position:sticky; top:calc(72px + 16px);
  align-self:start;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  padding: 1.25rem 1.5rem;
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  box-shadow: var(--shadow-sm);
  transition: transform .3s var(--rev-curve);
}
.toc strong{
  font-size: 1.05rem;
  font-weight: 800;
  display:block;
  margin-bottom:.75rem;
  color: var(--text-primary);
}
.toc ul{ list-style:none; padding:0; margin:0; }
.toc li{ margin: .35rem 0; }
.toc a{
  display:block;
  padding:.5rem .75rem;
  border-radius:12px;
  color: var(--text-muted);
  transition: all .2s ease;
  position:relative;
  font-weight:600;
}
.toc a::before{
  content:"";
  position:absolute; top:0; left:0;
  width:3px; height:100%;
  background: var(--rev-blue);
  transform: scaleY(0);
  transform-origin: top;
  transition: transform .3s var(--rev-curve);
  border-radius:2px;
}
.toc a:hover,
.toc a.active{
  color: var(--primary);
  background: color-mix(in oklab, var(--primary) 12%, transparent);
  transform: translateX(4px);
}
.toc a:hover::before,
.toc a.active::before{ transform: scaleY(1); }
@media (max-width:1100px){ .toc{ display:none; } }

/* ---------- Hero (uses page markup's .post-hero) ---------- */
.post-hero{
  grid-column:1 / -1;
  display:flex; flex-direction:column; gap:.8rem;
  padding: clamp(24px, 5vw, 56px);
  color:#fff;
  background: linear-gradient(135deg, var(--hero-start), var(--hero-end));
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  position:relative; overflow:hidden;
}
.post-hero::after{
  content:""; position:absolute; inset:0;
  background:
    radial-gradient(600px 220px at 20% 10%, rgba(255,255,255,.18), transparent),
    radial-gradient(800px 320px at 80% 10%, rgba(255,255,255,.12), transparent);
  mix-blend-mode: screen;
}
.post-hero .post-meta{ color: rgba(255,255,255,.85); font-size: var(--fs-500); }
.post-hero h1{
  margin:0; font-weight:900; letter-spacing:-.01em; line-height:1.12;
  font-size: var(--fs-900);
}
.post-cover{
  margin:0; border-radius: var(--radius-lg); overflow:hidden;
  background: var(--card); border: var(--card-border); box-shadow: var(--shadow-sm);
}
.post-cover img{ width:100%; height:auto; display:block; }
.post-cover figcaption{
  padding:.7rem 1rem; font-size:.95rem; color: var(--text-muted);
  border-top: 1px solid color-mix(in oklab, var(--text-muted) 14%, transparent);
}

/* ---------- Article Body ---------- */
.post-body{ max-width: 75ch; }
.post-body h2{
  font-size: clamp(1.6rem, 1.2rem + 1.6vw, 2.2rem);
  font-weight: 800;
  margin: 2.2rem 0 1rem;
  position: relative;
  color: var(--text-primary);
  padding-top: .9rem;
  line-height:1.2;
  letter-spacing:-.01em;
}
.post-body h2::before{
  content:""; position:absolute; top:0; left:0;
  width:60px; height:4px;
  background: linear-gradient(90deg, var(--rev-blue), var(--rev-purple));
  border-radius:2px;
}
.post-body h3{
  font-size: var(--fs-700);
  font-weight: 800;
  margin: 1.4rem 0 .6rem;
}
.post-body p{
  font-size: var(--fs-600);
  line-height:1.7;
  color: var(--text-primary);
  margin-bottom: 1.1rem;
}
.post-body a{
  color: var(--rev-blue);
  font-weight: 600;
  position: relative;
  text-decoration: none;
}
.post-body a::after{
  content:"";
  position:absolute; bottom:-2px; left:0;
  width:0; height:2px; background: var(--rev-blue);
  transition: width .2s ease;
}
.post-body a:hover{ color: var(--rev-purple); }
.post-body a:hover::after{ width:100%; }
.post-body hr{
  border:0; height:1px; margin: clamp(20px, 4vw, 36px) 0;
  background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--primary) 35%, var(--border-color)), transparent);
}

/* ---------- Callouts / Info Cards ---------- */
.callout, .info-card{
  margin: 1.8rem 0;
  padding: 1.25rem 1.4rem;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  position: relative;
  box-shadow: var(--shadow-sm);
}
.callout::before, .info-card::before{
  content:""; position:absolute; top:0; left:0; right:0; height:4px;
  background: linear-gradient(90deg, var(--rev-blue), var(--rev-purple), var(--rev-pink));
  border-radius: 2px 2px 0 0;
}
.callout.warn::before{ background: linear-gradient(90deg, var(--rev-orange), var(--rev-pink)); }

/* ---------- Speed Comparison Cards (optional) ---------- */
.speed-comparison{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:1rem;
  margin:1.8rem 0;
}
.speed-card{
  padding:1.25rem 1.4rem;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  text-align:center;
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  transition: transform .4s var(--rev-curve), box-shadow .4s var(--rev-curve), border-color .3s ease;
  cursor:pointer;
  box-shadow: var(--shadow-sm);
}
.speed-card:hover{
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 0 40px color-mix(in oklab, var(--primary) 28%, transparent);
  border-color: color-mix(in oklab, var(--primary) 40%, transparent);
}
.speed-number{
  font-size: clamp(1.6rem, 1.2rem + 1vw, 2.4rem);
  font-weight:900;
  background: linear-gradient(135deg, var(--rev-blue), var(--rev-purple));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  margin-bottom:.35rem;
}
.speed-label{
  font-size:.9rem; text-transform:uppercase; letter-spacing:.05em;
  color: var(--text-muted);
  margin-bottom:.25rem;
}

/* ---------- Code Container (optional) ---------- */
.code-container{
  margin:1.8rem 0;
  border-radius:16px;
  overflow:hidden;
  background: var(--surface);
  border: var(--card-border);
  box-shadow: var(--shadow-sm);
}
.code-header{
  display:flex; align-items:center;
  padding:.85rem 1rem;
  background: color-mix(in oklab, var(--text-muted) 10%, transparent);
}
.code-dots{ display:flex; gap:.5rem; }
.code-dots .dot{
  width:12px; height:12px; border-radius:50%;
  background:rgba(0,0,0,.15);
}
.dot.red{ background:#ff5f56; }
.dot.yellow{ background:#ffbd2e; }
.dot.green{ background:#27ca3f; }
.copy-button, .copy-btn{
  margin-left:auto;
  padding:.4rem .8rem;
  font-size:.8rem;
  background: color-mix(in oklab, var(--primary) 12%, transparent);
  border:1px solid color-mix(in oklab, var(--primary) 30%, transparent);
  border-radius:8px;
  color: var(--rev-blue);
  cursor:pointer;
}
.copy-button:hover, .copy-btn:hover{
  background: color-mix(in oklab, var(--primary) 20%, transparent);
}
.code-content{
  padding:1rem 1.1rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:.95rem;
  color: var(--text-primary);
  overflow-x:auto;
}

/* Also style plain <pre><code> blocks */
.post-body pre{
  position:relative; margin:1.2rem 0; padding:1rem 1.1rem;
  background: var(--surface);
  color: var(--text-primary);
  border: var(--card-border);
  border-radius: 14px;
  overflow:auto;
  box-shadow: var(--shadow-sm);
}
.post-body pre code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:.92em;
}

/* ---------- Tables ---------- */
.post-body table, .data-table{
  width:100%;
  margin:1.6rem 0;
  border-collapse:collapse;
  background: var(--card);
  border-radius:20px;
  overflow:hidden;
  border: var(--card-border);
  box-shadow: var(--shadow-sm);
  -webkit-backdrop-filter: blur(20px); backdrop-filter: blur(20px);
}
.data-table thead{
  background: linear-gradient(135deg, color-mix(in oklab, var(--primary) 20%, transparent), color-mix(in oklab, var(--accent) 20%, transparent));
}
.data-table th{
  padding:1rem; text-align:left; font-weight:800; font-size:.8rem; text-transform:uppercase; color: var(--text-primary);
}
.data-table td{
  padding:1rem; border-bottom:1px solid color-mix(in oklab, var(--text-muted) 14%, transparent);
  color: var(--text-primary);
}
.data-table tr:hover td{ background: color-mix(in oklab, var(--primary) 8%, transparent); }
@media (max-width:640px){ .post-body table{ display:block; overflow-x:auto; } }

/* ---------- Share / Tags / Author ---------- */
.post-share{
  display:flex; flex-wrap:wrap; gap:.6rem; align-items:center;
  padding:.9rem;
  border:1px dashed var(--border-color);
  border-radius: var(--radius);
  background: var(--surface);
  margin: clamp(20px, 4vw, 36px) 0 .9rem;
}
.post-share .btn-like{
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:700; border-radius:999px; padding:.6rem .95rem; cursor:pointer;
  border:2px solid var(--primary); color: var(--primary); background:transparent;
  transition: transform .18s ease, background-color .18s ease, color .18s ease;
}
.post-share .btn-like:hover{ background: color-mix(in oklab, var(--primary) 12%, transparent); }

.post-tags{
  display:flex; flex-wrap:wrap; gap:.5rem; margin:.9rem 0 clamp(20px,4vw,36px);
}
.post-tags .chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.35rem .7rem; border-radius:999px;
  background: color-mix(in oklab, var(--text-muted) 10%, transparent);
  border: 1px solid var(--border-color);
  color: var(--text-primary); font-size:.95rem; font-weight:600;
}

.author-card{
  display:grid; grid-template-columns:64px 1fr; gap:1rem;
  padding:1rem; border: var(--card-border); background: var(--card);
  border-radius: var(--radius-lg); box-shadow: var(--shadow-sm);
}
.author-card img{
  width:64px; height:64px; border-radius:50%;
  border:2px solid var(--primary); object-fit:cover; background: var(--surface);
}
.author-card .name{ font-weight:800; }
.author-card .bio{ color: var(--text-muted); font-size:.95rem; }

/* ---------- Post Navigation ---------- */
.post-nav{
  display:grid; grid-template-columns:1fr 1fr; gap:1rem;
  margin: clamp(24px, 5vw, 48px) 0 .9rem;
}
.post-nav a{
  display:block; padding:1rem; border-radius: var(--radius-lg);
  background: var(--card); border: var(--card-border); box-shadow: var(--shadow-sm);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.post-nav a:hover{
  transform: translateY(-4px); box-shadow: var(--shadow);
  border-color: color-mix(in oklab, var(--accent) 35%, transparent);
}
.post-nav .meta{ color: var(--text-muted); font-size:.95rem; margin-bottom:.25rem; }
.post-nav .title{ font-weight:800; }
@media (max-width:640px){ .post-nav{ grid-template-columns:1fr; } }

/* ---------- Reveal Animation ---------- */
.reveal{ opacity:0; transform:translateY(20px); transition: all .6s var(--rev-curve); }
.reveal.in-view{ opacity:1; transform:none; }

/* ---------- Dark Mode refinements ---------- */
html[data-theme="dark"] .toc,
html[data-theme="dark"] .callout,
html[data-theme="dark"] .info-card,
html[data-theme="dark"] .post-share,
html[data-theme="dark"] .author-card,
html[data-theme="dark"] .post-nav a,
html[data-theme="dark"] .code-container,
html[data-theme="dark"] .post-body pre{
  box-shadow: var(--shadow-lg);
}

