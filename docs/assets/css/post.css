/* ==========================================================
   RouterHaus Journal — Revolutionary Blog Design (2025)
   Cleaned & harmonized with main.css tokens
   ========================================================== */

/* ---------- Local tokens (derived from main.css) ---------- */
:root {
  --rev-blue: var(--primary, #6f7dff);
  --rev-purple: var(--accent, #ff8df3);
  --rev-pink: #ec4899;
  --rev-green: #10b981;
  --rev-orange: #ff6b35;
  --rev-curve: cubic-bezier(.33,1,.68,1);
}

/* ---------- Reading Progress ---------- */
.reading-progress{
  position:fixed; top:0; left:0; height:4px; width:0;
  background:linear-gradient(90deg,var(--hero-start),var(--hero-end));
  z-index:1100;
  box-shadow:0 6px 16px rgba(0,0,0,.12);
  transform-origin:0 50%;
  transition:width .1s ease;
}

/* ---------- Layout ---------- */
.post-shell{
  width:min(1120px, calc(100% - 2rem));
  margin-inline:auto;
  padding: clamp(1.5rem, 3vw, 3rem) 0;
  display:grid;
  grid-template-columns: 300px 1fr;
  gap: clamp(1.25rem, 3vw, 2.5rem);
}
@media (max-width:1024px){
  .post-shell{ grid-template-columns: 1fr; }
}

/* ---------- Navigation Sidebar (ToC) ---------- */
.toc{
  position:sticky; top:calc(72px + 16px);
  align-self:start;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  padding: 1.25rem 1.5rem;
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  box-shadow: var(--shadow-sm);
  transition: transform .3s var(--rev-curve);
}
.toc strong{
  font-size: 1.05rem;
  font-weight: 800;
  display:block;
  margin-bottom:.75rem;
  color: var(--text-primary);
}
.toc ul{ list-style:none; padding:0; margin:0; }
.toc li{ margin: .35rem 0; }
.toc a{
  display:block;
  padding:.5rem .75rem;
  border-radius:12px;
  color: var(--text-muted);
  transition: all .2s ease;
  position:relative;
  font-weight:600;
}
.toc a::before{
  content:"";
  position:absolute; top:0; left:0;
  width:3px; height:100%;
  background: var(--rev-blue);
  transform: scaleY(0);
  transform-origin: top;
  transition: transform .3s var(--rev-curve);
  border-radius:2px;
}
.toc a:hover,
.toc a.active{
  color: var(--primary);
  background: color-mix(in oklab, var(--primary) 12%, transparent);
  transform: translateX(4px);
}
.toc a:hover::before,
.toc a.active::before{ transform: scaleY(1); }
@media (max-width:1100px){ .toc{ display:none; } }

/* ---------- Hero (uses page markup's .post-hero) ---------- */
.post-hero{
  grid-column:1 / -1;
  display:flex; flex-direction:column; gap:.8rem;
  padding: clamp(24px, 5vw, 56px);
  color:#fff;
  background: linear-gradient(135deg, var(--hero-start), var(--hero-end));
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  position:relative; overflow:hidden;
}
.post-hero::after{
  content:""; position:absolute; inset:0;
  background:
    radial-gradient(600px 220px at 20% 10%, rgba(255,255,255,.18), transparent),
    radial-gradient(800px 320px at 80% 10%, rgba(255,255,255,.12), transparent);
  mix-blend-mode: screen;
}
.post-hero .post-meta{ color: rgba(255,255,255,.85); font-size: var(--fs-500); }
.post-hero h1{
  margin:0; font-weight:900; letter-spacing:-.01em; line-height:1.12;
  font-size: var(--fs-900);
}
.post-cover{
  margin:0; border-radius: var(--radius-lg); overflow:hidden;
  background: var(--card); border: var(--card-border); box-shadow: var(--shadow-sm);
}
.post-cover img{ width:100%; height:auto; display:block; }
.post-cover figcaption{
  padding:.7rem 1rem; font-size:.95rem; color: var(--text-muted);
  border-top: 1px solid color-mix(in oklab, var(--text-muted) 14%, transparent);
}

/* ---------- Article Body ---------- */
.post-body{ max-width: 75ch; }
.post-body h2{
  font-size: clamp(1.6rem, 1.2rem + 1.6vw, 2.2rem);
  font-weight: 800;
  margin: 2.2rem 0 1rem;
  position: relative;
  color: var(--text-primary);
  padding-top: .9rem;
  line-height:1.2;
  letter-spacing:-.01em;
}
.post-body h2::before{
  content:""; position:absolute; top:0; left:0;
  width:60px; height:4px;
  background: linear-gradient(90deg, var(--rev-blue), var(--rev-purple));
  border-radius:2px;
}
.post-body h3{
  font-size: var(--fs-700);
  font-weight: 800;
  margin: 1.4rem 0 .6rem;
}
.post-body p{
  font-size: var(--fs-600);
  line-height:1.7;
  color: var(--text-primary);
  margin-bottom: 1.1rem;
}
.post-body a{
  color: var(--rev-blue);
  font-weight: 600;
  position: relative;
  text-decoration: none;
}
.post-body a::after{
  content:"";
  position:absolute; bottom:-2px; left:0;
  width:0; height:2px; background: var(--rev-blue);
  transition: width .2s ease;
}
.post-body a:hover{ color: var(--rev-purple); }
.post-body a:hover::after{ width:100%; }
.post-body hr{
  border:0; height:1px; margin: clamp(20px, 4vw, 36px) 0;
  background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--primary) 35%, var(--border-color)), transparent);
}

/* ---------- Callouts / Info Cards ---------- */
.callout, .info-card{
  margin: 1.8rem 0;
  padding: 1.25rem 1.4rem;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  position: relative;
  box-shadow: var(--shadow-sm);
}
.callout::before, .info-card::before{
  content:""; position:absolute; top:0; left:0; right:0; height:4px;
  background: linear-gradient(90deg, var(--rev-blue), var(--rev-purple), var(--rev-pink));
  border-radius: 2px 2px 0 0;
}
.callout.warn::before{ background: linear-gradient(90deg, var(--rev-orange), var(--rev-pink)); }

/* ---------- Speed Comparison Cards (optional) ---------- */
.speed-comparison{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:1rem;
  margin:1.8rem 0;
}
.speed-card{
  padding:1.25rem 1.4rem;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--radius-lg);
  text-align:center;
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  transition: transform .4s var(--rev-curve), box-shadow .4s var(--rev-curve), border-color .3s ease;
  cursor:pointer;
  box-shadow: var(--shadow-sm);
}
.speed-card:hover{
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 0 40px color-mix(in oklab, var(--primary) 28%, transparent);
  border-color: color-mix(in oklab, var(--primary) 40%, transparent);
}
.speed-number{
  font-size: clamp(1.6rem, 1.2rem + 1vw, 2.4rem);
  font-weight:900;
  background: linear-gradient(135deg, var(--rev-blue), var(--rev-purple));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  margin-bottom:.35rem;
}
.speed-label{
  font-size:.9rem; text-transform:uppercase; letter-spacing:.05em;
  color: var(--text-muted);
  margin-bottom:.25rem;
}

/* ---------- Code Container (optional) ---------- */
.code-container{
  margin:1.8rem 0;
  border-radius:16px;
  overflow:hidden;
  background: var(--surface);
  border: var(--card-border);
  box-shadow: var(--shadow-sm);
}
.code-header{
  display:flex; align-items:center;
  padding:.85rem 1rem;
  background: color-mix(in oklab, var(--text-muted) 10%, transparent);
}
.code-dots{ display:flex; gap:.5rem; }
.code-dots .dot{
  width:12px; height:12px; border-radius:50%;
  background:rgba(0,0,0,.15);
}
.dot.red{ background:#ff5f56; }
.dot.yellow{ background:#ffbd2e; }
.dot.green{ background:#27ca3f; }
.copy-button, .copy-btn{
  margin-left:auto;
  padding:.4rem .8rem;
  font-size:.8rem;
  background: color-mix(in oklab, var(--primary) 12%, transparent);
  border:1px solid color-mix(in oklab, var(--primary) 30%, transparent);
  border-radius:8px;
  color: var(--rev-blue);
  cursor:pointer;
}
.copy-button:hover, .copy-btn:hover{
  background: color-mix(in oklab, var(--primary) 20%, transparent);
}
.code-content{
  padding:1rem 1.1rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:.95rem;
  color: var(--text-primary);
  overflow-x:auto;
}

/* Also style plain <pre><code> blocks */
.post-body pre{
  position:relative; margin:1.2rem 0; padding:1rem 1.1rem;
  background: var(--surface);
  color: var(--text-primary);
  border: var(--card-border);
  border-radius: 14px;
  overflow:auto;
  box-shadow: var(--shadow-sm);
}
.post-body pre code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size:.92em;
}

/* ---------- Tables ---------- */
.post-body table, .data-table{
  width:100%;
  margin:1.6rem 0;
  border-collapse:collapse;
  background: var(--card);
  border-radius:20px;
  overflow:hidden;
  border: var(--card-border);
  box-shadow: var(--shadow-sm);
  -webkit-backdrop-filter: blur(20px); backdrop-filter: blur(20px);
}
.data-table thead{
  background: linear-gradient(135deg, color-mix(in oklab, var(--primary) 20%, transparent), color-mix(in oklab, var(--accent) 20%, transparent));
}
.data-table th{
  padding:1rem; text-align:left; font-weight:800; font-size:.8rem; text-transform:uppercase; color: var(--text-primary);
}
.data-table td{
  padding:1rem; border-bottom:1px solid color-mix(in oklab, var(--text-muted) 14%, transparent);
  color: var(--text-primary);
}
.data-table tr:hover td{ background: color-mix(in oklab, var(--primary) 8%, transparent); }
@media (max-width:640px){ .post-body table{ display:block; overflow-x:auto; } }

/* ---------- Share / Tags / Author ---------- */
.post-share{
  display:flex; flex-wrap:wrap; gap:.6rem; align-items:center;
  padding:.9rem;
  border:1px dashed var(--border-color);
  border-radius: var(--radius);
  background: var(--surface);
  margin: clamp(20px, 4vw, 36px) 0 .9rem;
}
.post-share .btn-like{
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:700; border-radius:999px; padding:.6rem .95rem; cursor:pointer;
  border:2px solid var(--primary); color: var(--primary); background:transparent;
  transition: transform .18s ease, background-color .18s ease, color .18s ease;
}
.post-share .btn-like:hover{ background: color-mix(in oklab, var(--primary) 12%, transparent); }

.post-tags{
  display:flex; flex-wrap:wrap; gap:.5rem; margin:.9rem 0 clamp(20px,4vw,36px);
}
.post-tags .chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.35rem .7rem; border-radius:999px;
  background: color-mix(in oklab, var(--text-muted) 10%, transparent);
  border: 1px solid var(--border-color);
  color: var(--text-primary); font-size:.95rem; font-weight:600;
}

.author-card{
  display:grid; grid-template-columns:64px 1fr; gap:1rem;
  padding:1rem; border: var(--card-border); background: var(--card);
  border-radius: var(--radius-lg); box-shadow: var(--shadow-sm);
}
.author-card img{
  width:64px; height:64px; border-radius:50%;
  border:2px solid var(--primary); object-fit:cover; background: var(--surface);
}
.author-card .name{ font-weight:800; }
.author-card .bio{ color: var(--text-muted); font-size:.95rem; }

/* ---------- Post Navigation ---------- */
.post-nav{
  display:grid; grid-template-columns:1fr 1fr; gap:1rem;
  margin: clamp(24px, 5vw, 48px) 0 .9rem;
}
.post-nav a{
  display:block; padding:1rem; border-radius: var(--radius-lg);
  background: var(--card); border: var(--card-border); box-shadow: var(--shadow-sm);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.post-nav a:hover{
  transform: translateY(-4px); box-shadow: var(--shadow);
  border-color: color-mix(in oklab, var(--accent) 35%, transparent);
}
.post-nav .meta{ color: var(--text-muted); font-size:.95rem; margin-bottom:.25rem; }
.post-nav .title{ font-weight:800; }
@media (max-width:640px){ .post-nav{ grid-template-columns:1fr; } }

/* ---------- Reveal Animation ---------- */
.reveal{ opacity:0; transform:translateY(20px); transition: all .6s var(--rev-curve); }
.reveal.in-view{ opacity:1; transform:none; }

/* ---------- Dark Mode refinements ---------- */
html[data-theme="dark"] .toc,
html[data-theme="dark"] .callout,
html[data-theme="dark"] .info-card,
html[data-theme="dark"] .post-share,
html[data-theme="dark"] .author-card,
html[data-theme="dark"] .post-nav a,
html[data-theme="dark"] .code-container,
html[data-theme="dark"] .post-body pre{
  box-shadow: var(--shadow-lg);
}

/* ===== Desktop: put TOC left of the hero; content flows on right ===== */
@media (min-width: 1024px){
  .post-shell{
    grid-auto-flow: row dense;                /* lets TOC backfill left of hero */
  }

  /* Breadcrumb stays full-width on top */
  .breadcrumb{ grid-column: 1 / -1; }

  /* Hero sits in right column */
  .post-hero{
    grid-column: 2 / -1;
  }

  /* TOC occupies left column in same row as hero */
  .toc{
    grid-column: 1 / 2;
    grid-row: auto;
    display: block;                           /* override earlier hide below 1100px */
    max-height: calc(100vh - 96px);
    overflow: auto;
  }

  /* Article + other blocks flow under hero on the right */
  .post-body{ grid-column: 2 / -1; }
  .newsletter{ grid-column: 2 / -1; }
}

/* (Optional) tighten hero padding a bit since it's sharing the row */
@media (min-width: 1280px){
  .post-hero{ padding: clamp(24px, 3.5vw, 44px); }
}
/* ==========================================================
   Bottleneck Comparison — polished (copy & paste)
   Targets the first table after <h2 id="bottleneck">.
   No HTML changes required.
   ========================================================== */

.post-body h2#bottleneck ~ table{
  /* local tokens */
  --bt-radius: 20px;
  --bt-rail: linear-gradient(180deg, var(--rev-blue), var(--rev-purple));
  --bt-track: color-mix(in oklab, var(--text-muted) 18%, transparent);
  --bt-sep: color-mix(in oklab, var(--text-muted) 12%, transparent);

  width: 100%;
  border-collapse: separate; border-spacing: 0;
  background: var(--card);
  border: var(--card-border);
  border-radius: var(--bt-radius);
  overflow: hidden;
  -webkit-backdrop-filter: blur(14px) saturate(140%);
  backdrop-filter: blur(14px) saturate(140%);
  box-shadow: var(--shadow);
  font-variant-numeric: tabular-nums;
  isolation: isolate;
}

/* Header */
.post-body h2#bottleneck ~ table thead th{
  padding: .95rem 1rem;
  background: linear-gradient(135deg,
    color-mix(in oklab, var(--primary) 14%, transparent),
    color-mix(in oklab, var(--accent) 12%, transparent)
  );
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: .03em;
  font-weight: 800;
  border-bottom: 1px solid var(--bt-sep);
  white-space: normal; line-height: 1.2;
}

/* Cells */
.post-body h2#bottleneck ~ table td{
  padding: 1rem;
  vertical-align: middle;
  color: var(--text-primary);
  border-bottom: 1px solid var(--bt-sep);
  line-height: 1.35;
}

/* Zebra + hover */
.post-body h2#bottleneck ~ table tbody tr:nth-child(odd) td{
  background: color-mix(in oklab, var(--text-muted) 6%, transparent);
}
.post-body h2#bottleneck ~ table tbody tr:hover td{
  background: color-mix(in oklab, var(--primary) 9%, transparent);
}

/* Emphasize Wi-Fi 7 row */
.post-body h2#bottleneck ~ table tbody tr:last-child td{
  background: color-mix(in oklab, var(--accent) 8%, transparent);
  font-weight: 650;
}
.post-body h2#bottleneck ~ table tbody tr:last-child td:first-child{
  position: relative;
}
.post-body h2#bottleneck ~ table tbody tr:last-child td:first-child::before{
  content:""; position:absolute; inset:0 auto 0 0; width:5px; border-radius:0 2px 2px 0;
  background: var(--bt-rail);
}

/* Col 1: stronger label */
.post-body h2#bottleneck ~ table td:nth-child(1){
  font-weight: 800; letter-spacing:.005em;
}

/* Col 3: 6 GHz support icons (✖︎ / – / ✓) */
.post-body h2#bottleneck ~ table td:nth-child(3){ padding-left: 2rem; position: relative; }
.post-body h2#bottleneck ~ table td:nth-child(3)::before{
  content:""; position:absolute; left:.75rem; top:50%; transform:translateY(-50%);
  width:16px; height:16px; -webkit-mask-size:contain; mask-size:contain; -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat;
}
/* Row 1: No */
.post-body h2#bottleneck ~ table tbody tr:nth-child(1) td:nth-child(3)::before{
  background:#ef4444;
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M18.3 5.71L12 12.01L5.7 5.7L4.29 7.11L10.59 13.41L4.29 19.71L5.7 21.12L12 14.82L18.3 21.12L19.71 19.71L13.41 13.41L19.71 7.11z"/></svg>');
  mask-image:   url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M18.3 5.71L12 12.01L5.7 5.7L4.29 7.11L10.59 13.41L4.29 19.71L5.7 21.12L12 14.82L18.3 21.12L19.71 19.71L13.41 13.41L19.71 7.11z"/></svg>');
}
/* Row 2: 6E only */
.post-body h2#bottleneck ~ table tbody tr:nth-child(2) td:nth-child(3)::before{
  background:#f59e0b;
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M19 13H5v-2h14z"/></svg>');
  mask-image:   url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M19 13H5v-2h14z"/></svg>');
}
/* Row 3: Yes */
.post-body h2#bottleneck ~ table tbody tr:nth-child(3) td:nth-child(3)::before{
  background:#22c55e;
  -webkit-mask-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>');
  mask-image:   url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%23000" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>');
}

/* Col 4: throughput meters (anchored to bottom) */
.post-body h2#bottleneck ~ table td:nth-child(4){
  position: relative;
  padding-top: 1rem;
  padding-bottom: 1.75rem;     /* room for bar */
}
.post-body h2#bottleneck ~ table td:nth-child(4)::before{
  content:""; position:absolute; left:1rem; right:1rem; bottom:.6rem;
  height:8px; border-radius:999px; background: var(--bt-track);
}
.post-body h2#bottleneck ~ table td:nth-child(4)::after{
  content:""; position:absolute; left:1rem; bottom:.6rem; height:8px; border-radius:999px;
  width: var(--bar, 0%);
  background: linear-gradient(90deg, var(--rev-blue), var(--rev-purple));
  box-shadow: 0 0 0 1px color-mix(in oklab, var(--primary) 25%, transparent) inset;
}
/* bar widths per row */
.post-body h2#bottleneck ~ table tbody tr:nth-child(1) td:nth-child(4){ --bar: 55%; }
.post-body h2#bottleneck ~ table tbody tr:nth-child(2) td:nth-child(4){ --bar: 78%; }
.post-body h2#bottleneck ~ table tbody tr:nth-child(3) td:nth-child(4){ --bar: 96%; }

/* Rounded outer corners */
.post-body h2#bottleneck ~ table thead th:first-child{ border-top-left-radius: var(--bt-radius); }
.post-body h2#bottleneck ~ table thead th:last-child { border-top-right-radius: var(--bt-radius); }
.post-body h2#bottleneck ~ table tbody tr:last-child td:first-child{ border-bottom-left-radius: var(--bt-radius); }
.post-body h2#bottleneck ~ table tbody tr:last-child td:last-child { border-bottom-right-radius: var(--bt-radius); }

/* Footnote under table */
.post-body h2#bottleneck ~ table + p em{
  display: inline-block; margin-top: .4rem; color: var(--text-muted); font-size: .95rem;
}

/* ===== Mobile (≤720px): compact cards with labels ===== */
@media (max-width: 720px){
  .post-body h2#bottleneck ~ table,
  .post-body h2#bottleneck ~ table thead,
  .post-body h2#bottleneck ~ table tbody,
  .post-body h2#bottleneck ~ table th,
  .post-body h2#bottleneck ~ table td,
  .post-body h2#bottleneck ~ table tr{ display:block; }

  .post-body h2#bottleneck ~ table thead{ display:none; }

  .post-body h2#bottleneck ~ table tr{
    background: var(--card);
    border: var(--card-border);
    border-radius: 18px;
    padding: .9rem .95rem;
    margin: .85rem 0;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
  }
  .post-body h2#bottleneck ~ table tr:last-child::before{
    content:""; position:absolute; inset:0 auto 0 0; width:4px; background: var(--bt-rail);
  }

  .post-body h2#bottleneck ~ table td{
    border:0; padding: .55rem 0 .55rem 8.8rem; min-height: 40px;
  }
  .post-body h2#bottleneck ~ table td::before,
  .post-body h2#bottleneck ~ table td::after{ left: .95rem; right: .95rem; }

  /* mobile labels */
  .post-body h2#bottleneck ~ table td:nth-child(1){ font-weight:800; }
  .post-body h2#bottleneck ~ table td:nth-child(1)::before{ content:"Generation"; position:absolute; left:.95rem; top:.55rem; color:var(--text-muted); font-weight:700; }
  .post-body h2#bottleneck ~ table td:nth-child(2)::before{ content:"Max channel width"; position:absolute; left:.95rem; color:var(--text-muted); }
  .post-body h2#bottleneck ~ table td:nth-child(3)::before{ content:"6 GHz support"; position:absolute; left:.95rem; color:var(--text-muted); }
  .post-body h2#bottleneck ~ table td:nth-child(4)::before{ content:"Typical throughput"; position:absolute; left:.95rem; color:var(--text-muted); }
  .post-body h2#bottleneck ~ table td:nth-child(5)::before{ content:"Latency behavior"; position:absolute; left:.95rem; color:var(--text-muted); }
}

/* Dark-mode meter track contrast */
html[data-theme="dark"] .post-body h2#bottleneck ~ table td:nth-child(4)::before{
  background: color-mix(in oklab, var(--text-muted) 28%, transparent);
}
