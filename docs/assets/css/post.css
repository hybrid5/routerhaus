/* ==========================================================
   RouterHaus Journal â€” Post Pages (2025, Refined)
   Harmonized with Consult/Kits Design System
   ========================================================== */

/* ---------- Shell & Layout ---------- */
.post-shell{
  max-width:1200px;
  margin:0 auto;
  display:grid;
  grid-template-columns:1fr min(280px,30%);
  gap:clamp(24px,4vw,48px);
  padding:clamp(16px,2vw,28px);
}
@media(max-width:992px){
  .post-shell{ grid-template-columns:1fr; }
}

/* Breadcrumb */
.breadcrumb{
  display:flex; gap:.5rem; align-items:center;
  color:var(--text-2);
  font-size:var(--text-sm);
  margin-bottom:var(--space-3);
  opacity:.9;
}
.breadcrumb a{
  color:inherit; text-decoration:none;
  border-bottom:1px dashed color-mix(in oklab, var(--primary) 30%, transparent);
}
.breadcrumb a:hover{ color:var(--primary); border-bottom-color:var(--primary); }

/* ---------- Hero ---------- */
.post-hero{
  display:flex; flex-direction:column;
  gap:var(--space-3);
  margin-bottom:var(--space-6);
  padding:clamp(32px,5vw,64px);
  border-radius:var(--radius-2xl);
  background:
    linear-gradient(160deg,var(--hero-start),var(--hero-end));
  color:#fff;
  box-shadow:var(--shadow);
}
.post-hero .post-meta{
  color:rgba(255,255,255,.8);
  font-size:var(--text-sm);
}
.post-hero h1{
  margin:0;
  font-weight:900;
  letter-spacing:-.01em;
  line-height:1.12;
  font-size:clamp(2rem,1.4rem + 2vw,3rem);
}
.post-cover{
  margin:0;
  border-radius:var(--radius-xl);
  overflow:hidden;
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
}
.post-cover img{ width:100%; height:auto; display:block; }
.post-cover figcaption{
  padding:.6rem .9rem;
  font-size:var(--text-sm);
  color:var(--text-2);
  background:var(--surface-secondary);
  border-top:1px solid var(--border);
}

/* ---------- Table of Contents ---------- */
.toc{
  position:sticky; top:84px;
  align-self:start;
  padding:var(--space-4);
  border-radius:var(--radius-xl);
  background:var(--surface-primary);
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
}
.toc strong{ display:block; margin-bottom:.5rem; color:var(--text-1); }
.toc ul{ list-style:none; margin:0; padding:0; display:grid; gap:.4rem; }
.toc a{
  display:block;
  padding:.35rem .5rem;
  border-radius:var(--radius);
  color:var(--text-2);
  text-decoration:none;
  transition:background var(--duration-normal) var(--easing-smooth);
}
.toc a:hover,
.toc a.active{
  background:color-mix(in oklab, var(--primary) 10%, transparent);
  color:var(--text-1);
  font-weight:600;
}
@media(max-width:1100px){
  .toc{ display:none; }
}

/* ---------- Body / Prose ---------- */
.post-body{
  max-width:70ch;
}
.post-body h2{
  margin:var(--space-6) 0 var(--space-2);
  font-size:clamp(1.4rem,1.1rem + .9vw,2rem);
  line-height:1.2;
  font-weight:800;
  letter-spacing:-.01em;
  padding-top:.25rem;
  border-top:1px solid var(--border);
}
.post-body h3{
  margin:var(--space-4) 0 var(--space-2);
  font-size:var(--text-xl);
  font-weight:800;
}
.post-body p{
  margin:.9rem 0;
  color:var(--text-1);
  line-height:clamp(1.6,1.5 + .2vw,1.75);
}
.post-body ul,
.post-body ol{ margin:.5rem 0 .9rem 1.2rem; padding:0; }
.post-body li{ margin:.4rem 0; }
.post-body a{
  color:var(--primary);
  text-decoration:none;
  border-bottom:2px solid color-mix(in oklab,var(--primary) 40%,transparent);
}
.post-body a:hover{
  color:color-mix(in oklab,var(--primary) 85%,black 0%);
  border-bottom-color:var(--primary);
}
.post-body hr{
  border:0; height:1px; margin:var(--space-6) 0;
  background:linear-gradient(90deg,transparent,color-mix(in oklab,var(--primary) 35%,var(--border)),transparent);
}

/* Quotes */
.post-body blockquote{
  margin:var(--space-4) 0;
  padding:var(--space-3) var(--space-4);
  border-left:4px solid var(--primary);
  font-style:italic;
  background:var(--surface-secondary);
  border-radius:var(--radius);
  color:var(--text-2);
}

/* Tables */
.post-body table{
  width:100%;
  border-collapse:collapse;
  margin:var(--space-4) 0;
  font-size:var(--text-sm);
  overflow:hidden;
  border-radius:var(--radius);
  box-shadow:var(--shadow-sm);
  border:1px solid var(--border);
}
.post-body thead th{
  text-align:left;
  background:linear-gradient(180deg,color-mix(in oklab,var(--primary) 10%,transparent),transparent);
  color:var(--text-1);
  padding:.8rem .9rem;
  border-bottom:1px solid var(--border);
  font-weight:800;
}
.post-body td{
  padding:.7rem .9rem;
  border-bottom:1px solid color-mix(in oklab,var(--text-2) 10%,transparent);
}
.post-body tbody tr:nth-child(odd){
  background:color-mix(in oklab,var(--surface-tertiary) 40%,transparent);
}
@media(max-width:640px){
  .post-body table{ display:block; overflow-x:auto; }
}

/* Code */
.post-body pre{
  position:relative;
  margin:var(--space-4) 0;
  padding:1rem 1.1rem;
  background:var(--surface-secondary);
  color:var(--text-1);
  border:1px solid var(--border);
  border-radius:var(--radius);
  overflow:auto;
  box-shadow:var(--shadow-soft);
}
.post-body code{
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size:.92em;
  background:color-mix(in oklab,var(--primary) 8%,transparent);
  padding:.05rem .35rem;
  border-radius:6px;
}
.post-body pre code{ background:transparent; padding:0; }

/* Images inside prose */
.post-body img{
  border-radius:var(--radius-lg);
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
  margin:var(--space-3) 0;
}

/* ---------- Callouts ---------- */
.callout{
  padding:var(--space-4);
  margin:var(--space-4) 0;
  border-radius:var(--radius-xl);
  border:1px solid var(--border);
  background:var(--surface-primary);
  box-shadow:var(--shadow-sm);
  border-top:4px solid var(--primary);
}
.callout strong:first-child{
  display:block;
  margin-bottom:.5rem;
  font-weight:700;
}

/* ---------- Share / Tags / Author ---------- */
.post-share{
  display:flex; flex-wrap:wrap; gap:.6rem;
  padding:var(--space-3);
  border:1px dashed var(--border);
  border-radius:var(--radius);
  background:var(--surface-secondary);
  margin:var(--space-5) 0 var(--space-3);
}
.post-share .btn{ height:40px; padding:0 .9rem; }

.post-tags{
  display:flex; flex-wrap:wrap; gap:.5rem;
  margin:var(--space-3) 0 var(--space-5);
}
.post-tags .chip{
  background:var(--surface-tertiary);
  border-color:var(--border);
}

.author-card{
  display:grid; grid-template-columns:64px 1fr; gap:var(--space-3);
  padding:var(--space-4);
  border:1px solid var(--border);
  background:var(--surface-primary);
  border-radius:var(--radius-xl);
  box-shadow:var(--shadow-sm);
}
.author-card img{
  width:64px; height:64px; border-radius:50%;
  border:2px solid var(--primary);
  background:var(--surface-tertiary);
  object-fit:cover;
}
.author-card .name{ font-weight:800; }
.author-card .bio{ color:var(--text-2); font-size:var(--text-sm); }

/* ---------- Post Navigation ---------- */
.post-nav{
  display:grid; grid-template-columns:1fr 1fr; gap:var(--space-3);
  margin:var(--space-6) 0 var(--space-3);
}
.post-nav a{
  display:block;
  padding:var(--space-4);
  border-radius:var(--radius-xl);
  background:var(--surface-primary);
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
  transition:transform var(--duration-normal) var(--easing-smooth),
             box-shadow var(--duration-normal) var(--easing-smooth),
             border-color var(--duration-normal) var(--easing-smooth);
}
.post-nav a:hover{
  transform:translateY(-4px);
  box-shadow:var(--shadow);
  border-color:color-mix(in oklab,var(--accent) 35%,var(--border));
}
.post-nav .meta{
  color:var(--text-2);
  font-size:var(--text-sm);
  margin-bottom:.25rem;
}
.post-nav .title{ font-weight:800; }
@media(max-width:640px){
  .post-nav{ grid-template-columns:1fr; }
}

/* ---------- Newsletter inset ---------- */
.post-shell .newsletter{ margin-top:var(--space-8); }

/* ---------- Animations / reveal ---------- */
.reveal{ opacity:0; transform:translateY(8px);
  transition:opacity var(--duration-normal) var(--easing-smooth),
             transform var(--duration-normal) var(--easing-smooth); }
.reveal.in-view{ opacity:1; transform:none; }

/* ---------- Dark mode refinements ---------- */
html[data-theme="dark"] .post-hero{
  background:linear-gradient(160deg,var(--hero-start),var(--hero-end));
}
html[data-theme="dark"] .post-body table{ box-shadow:none; }

/* ---------- Responsive ---------- */
@media(max-width:640px){
  .post-shell{ padding:16px; }
  .post-hero{ padding:var(--space-3); border-radius:var(--radius-xl); }
  .post-hero h1{ font-size:clamp(1.6rem,1.2rem + 3vw,2.1rem); }
  .author-card{ grid-template-columns:56px 1fr; }
}

/* ---------- Selection ---------- */
.post-shell ::selection{
  background:rgba(var(--primary-rgb),.28);
  color:var(--text-1);
}
