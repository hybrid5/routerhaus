/* filename: /css/main.css */
/* ===============================
   RouterHaus â€” main.css (core/shared)
   Unified tokens, components & a11y
   =============================== */

/* ---- Reset / base ---- */
*, *::before, *::after { box-sizing: border-box; }
html, body { height: 100%; }
body, h1, h2, h3, h4, p, figure, blockquote, dl, dd { margin: 0; }
img, svg, video, canvas { display: block; max-width: 100%; height: auto; }
button, input, select, textarea { font: inherit; }
html { scroll-behavior: smooth; }

/* ---- Design tokens (canonical) ---- */
:root{
  /* Brand (preserve RouterHaus palette from home/kits) */
  --primary: #7b7bff;        /* hsl(240 100% 70%) */
  --accent:  #5ea0ff;        /* hsl(210 100% 65%) */
  --secondary:#1c3aa6;

  /* Neutrals (light) */
  --bg:#f8fafc;
  --bg-elev:#ffffff;
  --card:#ffffff;
  --text-1:#0a0f1e;
  --text-2:#3a4361;
  --muted:#6d7694;

  /* Nav text/hover (site chrome) */
  --nav-text:#0f172a;
  --nav-hover:#1c3aa6;

  /* States */
  --success:#10b981; --danger:#ef4444; --info:#3b82f6; --warning:#f59e0b;

  /* Focus/Ring */
  --ring: color-mix(in oklab, var(--primary) 60%, transparent);

  /* Layout / shape / depth */
  --radius:16px;
  --radius-lg:22px;
  --radius-xl:24px;
  --radius-2xl:32px;
  --radius-full:9999px;

  /* Shadows (normalized/aliased) */
  --shadow-sm:0 6px 20px rgba(16,24,40,.08);
  --shadow:0 10px 30px rgba(16,24,40,.10);
  --shadow-lg:0 22px 60px rgba(16,24,40,.18);
  --shadow-strong:0 20px 48px rgba(16,24,40,.15);
  /* legacy aliases used by pages */
  --shadow-soft: var(--shadow-sm);
  --shadow-md: var(--shadow);

  --transition: all .24s cubic-bezier(.4,0,.2,1);

  /* Borders */
  --border: color-mix(in oklab, var(--text-2) 14%, transparent);

  /* Glass */
  --glass-bg: rgba(255,255,255,.10);
  --glass-border: rgba(255,255,255,.20);
  --glass-tint: rgba(255,255,255,.05);
  --glass-blur: 20px; --glass-sat: 140%;

  /* Typography scale */
  --fs-900: clamp(2.2rem, 1.4rem + 3.2vw, 3.4rem);
  --fs-800: clamp(1.6rem, 1.1rem + 1.6vw, 2.2rem);
  --fs-700: 1.3rem;
  --fs-600: 1.125rem;
  --fs-500: 1rem;

  /* Container */
  --container-max: 1200px;

  /* Z-index scale */
  --z-navbar: 1000;
  --z-overlay: 999;
  --z-modal: 160;

  /* ---- Alias layer (compat with page tokens) ---- */
  --text-primary: var(--text-1);
  --text-muted: var(--text-2);
  --border-color: var(--border);
  --card-border-color: var(--border);
  --focus: var(--ring);
}
html[data-theme="dark"]{
  --bg:#0a0e16;
  --bg-elev:#0f1419;
  --card:#0f1b33;
  --text-1:#e6eaf5;
  --text-2:#94a3b8;
  --muted:#a0aec0;

  --nav-text:#e6eaf5;
  --nav-hover:#9cb6ff;

  --primary:#9ea7ff;
  --accent:#5ea0ff; /* keep accent hue for continuity */

  --border: color-mix(in oklab, var(--text-2) 22%, transparent);

  /* Glass in dark */
  --glass-bg: rgba(10,14,22,.40);
  --glass-border: rgba(255,255,255,.10);
  --glass-tint: rgba(10,14,22,.20);

  --shadow: 0 20px 40px rgba(0,0,0,.40);
  --shadow-sm: 0 10px 24px rgba(0,0,0,.30);
  --shadow-strong: 0 30px 60px rgba(0,0,0,.50);
}

/* ---- Base styles ---- */
html, body{
  background:var(--bg);
  color:var(--text-1);
  -webkit-font-smoothing:antialiased;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  line-height:1.5;
  transition:background-color .25s,color .25s;
}
a { color: inherit; text-decoration: none; }
a:hover { color: var(--nav-hover); }

/* Container (unified) */
.container{
  max-width: var(--container-max);
  width: 100%;
  margin-inline:auto;
  padding-left:1rem;
  padding-right:1rem;
}

/* ---- Shared utilities ---- */
.nowrap{ white-space:nowrap; }
.grad{ background: linear-gradient(90deg, var(--accent), var(--primary)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }

/* ---- Glass surface ---- */
.glass{
  background: var(--glass-bg);
  border:1px solid var(--glass-border);
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
}

/* ---- Focus ring (a11y) ---- */
:where(a,button,.chip,.btn,input,select,textarea):focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--ring) 40%, transparent), 0 0 0 1px var(--border) inset;
  border-color: color-mix(in oklab, var(--ring) 50%, var(--border));
}

/* ---- Navbar ---- */
.navbar{
  position:sticky; top:0; z-index:var(--z-navbar);
  display:flex; align-items:center; justify-content:space-between;
  padding:.9rem 1.25rem;
  background:linear-gradient(110deg, color-mix(in oklab, var(--bg-elev) 85%, transparent), color-mix(in oklab, var(--bg) 85%, transparent));
  -webkit-backdrop-filter: blur(18px); backdrop-filter: blur(18px);
  box-shadow:var(--shadow-sm);
}
html[data-theme="dark"] .navbar{
  background:linear-gradient(110deg, rgba(11,17,32,.75), rgba(11,17,32,.55));
}
.logo{
  font-weight:800; font-size:1.6rem; letter-spacing:-.3px; color:var(--primary);
  display:flex; align-items:center;
}
.logo span{
  background:linear-gradient(90deg,var(--accent),var(--primary));
  -webkit-text-fill-color:transparent; -webkit-background-clip:text;
}
.nav-desktop{ display:flex; gap:1.1rem; align-items:center; }
.nav-desktop a{
  position:relative; padding:.35rem 0; font-weight:600; color:var(--nav-text);
}
.nav-desktop a::after{
  content:""; position:absolute; left:0; bottom:-3px; height:2px; width:0; background:var(--accent);
  transition:width var(--transition);
}
.nav-desktop a:hover::after{ width:100%; }
.nav-desktop .btn{ margin-left:.6rem; }

/* ---- Buttons (canonical) ---- */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  font-weight:700; border-radius:var(--radius); padding:.72rem 1rem; font-size:1rem;
  border:1px solid var(--border); background:var(--surface-primary, #fff); color:var(--text-1);
  transition: transform .18s ease, filter .18s ease, background-color .18s ease, color .18s ease, box-shadow .18s ease, border-color .18s ease;
  box-shadow:var(--shadow-sm);
  cursor:pointer; text-decoration:none; white-space:nowrap;
}
.btn:hover{ transform:translateY(-2px); filter:brightness(1.02); box-shadow:var(--shadow); }
.btn.primary{
  background:linear-gradient(135deg, var(--primary), var(--accent));
  color:#fff; border:none; box-shadow:0 8px 22px rgba(111,125,255,.35);
}
.btn.ghost{ background: transparent; color: var(--text-1); }
.btn.small{ padding:.55rem .8rem; border-radius:12px; font-size:.95rem; }
.btn.tiny{ padding:.25rem .5rem; border-radius:12px; font-size:.85rem; }
.icon-btn{
  display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:var(--radius);
  border:1px solid var(--border);background:var(--surface-primary);color:var(--text-2);
  transition:all .18s ease; box-shadow:var(--shadow-sm); cursor:pointer;
}
.icon-btn:hover{ background:var(--surface-secondary, #f7f9fc); color:var(--text-1); transform:translateY(-1px); }

/* ---- Chips ---- */
.chips{ display:flex; flex-wrap:wrap; gap:.5rem; }
.chip{
  display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .85rem;
  border-radius:var(--radius-full); border:1px solid var(--border);
  background: var(--surface-tertiary, color-mix(in oklab, var(--card) 86%, transparent));
  color:var(--text-1); font-weight:700; line-height:1; transition: all .18s ease;
}
.chip:hover{ transform: translateY(-2px); box-shadow: var(--shadow-sm); }

/* ---- Cards (generic) ---- */
.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:var(--radius-lg); padding:1rem; box-shadow:var(--shadow-sm);
}

/* ---- Accordion (shared) ---- */
.accordion-item{ border-top:1px solid var(--border); cursor:pointer; padding:1rem 0; position:relative; }
.accordion-item h4{ margin:0; font-size:1.05rem; }
.accordion-item span{ position:absolute; right:.25rem; top:.85rem; font-size:1.2rem; color: var(--primary); transition: transform .2s ease; }
.accordion-item.open span{ transform: rotate(45deg); }
.accordion-item p{ display:none; color: var(--text-2); margin:.55rem 0 0; }
.accordion-item.open p{ display:block; }

/* ---- Reveal (shared) ---- */
.reveal{ opacity:0; transform:translateY(8px); transition: opacity .22s cubic-bezier(.22,.61,.36,1), transform .22s cubic-bezier(.22,.61,.36,1); }
.reveal.in-view{ opacity:1; transform:none; }

/* ---- Sidebar (mobile) ---- */
.hamburger{
  display:none; flex-direction:column; gap:4px; background:transparent; border:0; cursor:pointer;
}
.hamburger span{
  width:26px; height:3px; border-radius:2px; background:var(--text-1);
  transition:var(--transition);
}
.hamburger.active span:first-child{ transform:rotate(45deg) translate(6px,6px); }
.hamburger.active span:nth-child(2){ opacity:0; }
.hamburger.active span:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px); }

.sidebar{
  position:fixed; top:70px; right:-100%; z-index:var(--z-navbar);
  width:min(92vw, 340px); height:calc(100% - 70px);
  padding:1.4rem 1.2rem; display:flex; flex-direction:column; gap:1rem;
  background:var(--card); border-left:1px solid var(--border);
  -webkit-backdrop-filter: blur(18px); backdrop-filter: blur(18px);
  border-top-left-radius:var(--radius); border-bottom-left-radius:var(--radius);
  box-shadow:-8px 0 24px rgba(0,0,0,.12);
  transition:right var(--transition);
}
.sidebar.active{ right:0; }
.sidebar-header{ text-align:center; margin-bottom:1rem; }
.sidebar-close{ position:absolute; top:1rem; right:1rem; font-size:1.5rem; cursor:pointer; line-height:1; }
.sidebar nav, .nav-links{
  display:flex; flex-direction:column; gap:.5rem; padding:0; list-style:none; margin:0;
}
.sidebar nav a, .nav-links a{
  padding:.7rem 1rem; border-radius:12px; color:var(--nav-text);
  transition:color .2s ease, background-color .2s ease;
}
.sidebar nav a:hover, .nav-links a:hover{
  background: color-mix(in oklab, var(--primary) 10%, transparent);
}
.sidebar .btn{ width:100%; text-align:center; }
.overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.5);
  opacity:0; visibility:hidden; transition:var(--transition); z-index:var(--z-overlay);
}
.overlay.active{ opacity:1; visibility:visible; }

/* ---- Footer ---- */
footer{ text-align:center; background:color-mix(in oklab, var(--accent) 6%, var(--bg)); padding:2rem 1rem; font-size:.95rem; }

/* ---- Scrollbars (shared) ---- */
::-webkit-scrollbar{ width:8px; height:8px }
::-webkit-scrollbar-thumb{ background:color-mix(in oklab,var(--muted) 50%,transparent); border-radius:var(--radius-full) }
::-webkit-scrollbar-thumb:hover{ background:color-mix(in oklab,var(--muted) 70%,transparent) }

/* ---- Responsive tweaks ---- */
@media (max-width: 992px){
  .navbar{ padding:.8rem 1rem; }
}
@media (max-width: 768px){
  .nav-desktop{ display:none; }
  .hamburger{ display:flex; }
  .container{ max-width: min(100%, var(--container-max)); }
}
@media (max-width: 480px){
  .navbar{ padding:.7rem .9rem; }
  .btn, .btn-secondary{ padding:.68rem 1.05rem; }
}

/* ---- Logo underline fix ---- */
.navbar .logo,
.navbar .logo:link,
.navbar .logo:visited,
.navbar .logo:hover,
.navbar .logo:focus{ text-decoration:none; }
